---
import { config } from "../../config";
import Home from "../../layouts/home.astro";
import Main from "../../layouts/main.astro";
import {getI18n} from '../../i18n'
import * as glob from 'glob'

export async function getStaticPaths() {
  const languages = glob.globSync('src/locales/*.json').map((file) => {
    return file.split('/').pop().split('.').shift()
  })
  return languages.map(lang => ({ params: { lang } }))
}

const { lang } = Astro.params;

const i18next = await getI18n(lang)
const t = i18next.t

---

<Home 
  t={t}
 />