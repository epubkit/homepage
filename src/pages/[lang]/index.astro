---
import { config } from "../../config";
import Home from "../../layouts/home.astro";
import Main from "../../layouts/main.astro";
import i18next from "i18next";
import * as glob from 'glob'

export async function getStaticPaths() {
  const languages = glob.globSync('src/locales/*.json').map((file) => {
    return file.split('/').pop().split('.').shift()
  })
  return languages.map(lang => ({ params: { lang } }))
}

const { lang } = Astro.params;

i18next.init({
  lng: lang,
  resources: {
    [lang]: {
      translation: await import(`../../locales/${lang}.json`),
    },
  },
});

const features = i18next.t("home.features", { returnObjects: true });
const qna = i18next.t("home.qna", { returnObjects: true });
const pricing = i18next.t("home.pricing", { returnObjects: true });
const words = i18next.t("home.words", { returnObjects: true });
---


<Home 
  features={features}
  qna={qna}
  pricing={pricing}
  words={words}
 />